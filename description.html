<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.43">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="description" content="Learn how to create a package, the fundamental unit of shareable, reusable, and reproducible R code.">
<title>9&nbsp; DESCRIPTION – R Packages (2e)</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./dependencies-mindset-background.html" rel="next">
<link href="./misc.html" rel="prev">
<link href="./images/cover-2e-small.png" rel="icon" type="image/png">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-d4d76bf8491c20bad77d141916dc28e1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-8c563c05ac8c1d64e78fdaf2b4701079.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script><script defer="" data-domain="r-pkgs.org" src="https://plausible.io/js/plausible.js"></script>
</head>
<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./description.html">Package metadata</a></li><li class="breadcrumb-item"><a href="./description.html"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title"><code>DESCRIPTION</code></span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">R Packages (2e)</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/hadley/r-pkgs/" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Welcome!</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./preface.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./introduction.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Getting started</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./whole-game.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">The Whole Game</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./setup.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">System setup</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./structure.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Package structure and state</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./workflow101.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Fundamental development workflows</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./package-within.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">The package within</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">Package components</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./code.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">R code</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./misc.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Other components</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">Package metadata</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./description.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title"><code>DESCRIPTION</code></span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./dependencies-mindset-background.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Dependencies: Mindset and Background</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./dependencies-in-practice.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Dependencies: In Practice</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./license.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Licensing</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true">
 <span class="menu-text">Testing</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./testing-basics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Testing basics</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./testing-design.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Designing your test suite</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./testing-advanced.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Advanced testing techniques</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true">
 <span class="menu-text">Documentation</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./man.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Function documentation</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./vignettes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Vignettes</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./other-markdown.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Other markdown files</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./website.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Website</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true">
 <span class="menu-text">Maintenance and distribution</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./software-development-practices.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Software development practices</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./lifecycle.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Lifecycle</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./release.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Releasing to CRAN</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">References</span></span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true">
 <span class="menu-text">Appendices</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./R-CMD-check.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title"><code>R CMD check</code></span></span></a>
  </div>
</li>
      </ul>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Table of contents</h2>
   
  <ul>
<li><a href="#the-description-file" id="toc-the-description-file" class="nav-link active" data-scroll-target="#the-description-file"><span class="header-section-number">9.1</span> The <code>DESCRIPTION</code> file</a></li>
  <li><a href="#sec-description-title-and-description" id="toc-sec-description-title-and-description" class="nav-link" data-scroll-target="#sec-description-title-and-description"><span class="header-section-number">9.2</span> <code>Title</code> and <code>Description</code>: What does your package do?</a></li>
  <li><a href="#sec-description-authors-at-r" id="toc-sec-description-authors-at-r" class="nav-link" data-scroll-target="#sec-description-authors-at-r"><span class="header-section-number">9.3</span> Author: who are you?</a></li>
  <li><a href="#url-and-bugreports" id="toc-url-and-bugreports" class="nav-link" data-scroll-target="#url-and-bugreports"><span class="header-section-number">9.4</span> <code>URL</code> and <code>BugReports</code></a></li>
  <li><a href="#the-license-field" id="toc-the-license-field" class="nav-link" data-scroll-target="#the-license-field"><span class="header-section-number">9.5</span> The <code>License</code> field</a></li>
  <li>
<a href="#sec-description-imports-suggests" id="toc-sec-description-imports-suggests" class="nav-link" data-scroll-target="#sec-description-imports-suggests"><span class="header-section-number">9.6</span> <code>Imports</code>, <code>Suggests</code>, and friends</a>
  <ul class="collapse">
<li><a href="#sec-description-imports-suggests-minium-version" id="toc-sec-description-imports-suggests-minium-version" class="nav-link" data-scroll-target="#sec-description-imports-suggests-minium-version"><span class="header-section-number">9.6.1</span> Minimum versions</a></li>
  <li><a href="#depends-and-linkingto" id="toc-depends-and-linkingto" class="nav-link" data-scroll-target="#depends-and-linkingto"><span class="header-section-number">9.6.2</span> <code>Depends</code> and <code>LinkingTo</code></a></li>
  <li><a href="#an-r-version-gotcha" id="toc-an-r-version-gotcha" class="nav-link" data-scroll-target="#an-r-version-gotcha"><span class="header-section-number">9.6.3</span> An R version gotcha</a></li>
  </ul>
</li>
  <li><a href="#other-fields" id="toc-other-fields" class="nav-link" data-scroll-target="#other-fields"><span class="header-section-number">9.7</span> Other fields</a></li>
  <li><a href="#sec-description-custom-fields" id="toc-sec-description-custom-fields" class="nav-link" data-scroll-target="#sec-description-custom-fields"><span class="header-section-number">9.8</span> Custom fields</a></li>
  </ul><div class="toc-actions"><ul><li><a href="https://github.com/hadley/r-pkgs/edit/main/description.Rmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/hadley/r-pkgs/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./description.html">Package metadata</a></li><li class="breadcrumb-item"><a href="./description.html"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title"><code>DESCRIPTION</code></span></a></li></ol></nav><div class="quarto-title">
<h1 class="title"><span id="sec-description" class="quarto-section-identifier"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title"><code>DESCRIPTION</code></span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header><p><code>DESCRIPTION</code> and <code>NAMESPACE</code> are two important files that provide metadata about your package. The <code>DESCRIPTION</code> file provides overall metadata about the package, such as the package name and which other packages it depends on. The <code>NAMESPACE</code> file specifies which functions your package makes available for others to use and, optionally, imports functions from other packages.</p>
<p>In this chapter, you’ll learn about the most important fields found in <code>DESCRIPTION</code>. The next two chapters cover the topic of package dependencies, which is where the importance of the <code>NAMESPACE</code> file will become clear. First, in <a href="dependencies-mindset-background.html" class="quarto-xref"><span>Chapter 10</span></a>, we discuss the costs and benefits of dependencies and also provide the relevant technical context around how R finds objects. In <a href="dependencies-in-practice.html" class="quarto-xref"><span>Chapter 11</span></a>, we explain the practical moves necessary to use your dependencies within your package. The metadata part of the book concludes with <a href="license.html" class="quarto-xref"><span>Chapter 12</span></a>, which covers licensing.</p>
<section id="the-description-file" class="level2" data-number="9.1"><h2 data-number="9.1" class="anchored" data-anchor-id="the-description-file">
<span class="header-section-number">9.1</span> The <code>DESCRIPTION</code> file</h2>
<p>The job of the <code>DESCRIPTION</code> file is to store important metadata about your package. When you first start writing packages, you’ll mostly use these metadata to record what packages are needed to run your package. However, as time goes by, other aspects of the metadata file will become useful to you, such as revealing what your package does (via the <code>Title</code> and <code>Description</code>) and whom to contact (you!) if there are any problems.</p>
<p>Every package must have a <code>DESCRIPTION</code>. In fact, it’s the defining feature of a package (RStudio and devtools consider any directory containing <code>DESCRIPTION</code> to be a package)<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>. To get you started, <code>usethis::create_package("mypackage")</code> automatically adds a bare-bones <code>DESCRIPTION</code> file. This will allow you to start writing the package without having to worry about the metadata until you need to. This minimal <code>DESCRIPTION</code> will vary a bit depending on your settings, but should look something like this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Package</span><span class="kw">:</span><span class="at"> mypackage</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">Title</span><span class="kw">:</span><span class="at"> What the Package Does (One Line, Title Case)</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">Version</span><span class="kw">:</span><span class="at"> </span><span class="fl">0.0.0.9000</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">Authors@R</span><span class="kw">:</span><span class="at"> </span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="at">    person("First", "Last", , "first.last@example.com", role = c("aut", "cre"))</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">Description</span><span class="kw">:</span><span class="at"> What the package does (one paragraph).</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">License</span><span class="kw">:</span><span class="at"> `use_mit_license()`, `use_gpl3_license()` or friends to pick a</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="at">    license</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">Encoding</span><span class="kw">:</span><span class="at"> UTF-8</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">Roxygen</span><span class="kw">:</span><span class="at"> list(markdown = TRUE)</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="fu">RoxygenNote</span><span class="kw">:</span><span class="at"> </span><span class="fl">7.3.2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>If you create a lot of packages, you can customize the default content of new <code>DESCRIPTION</code> files by setting the global option <code>usethis.description</code> to a named list. You can pre-configure your preferred name, email, license, etc. See the <a href="https://usethis.r-lib.org/articles/articles/usethis-setup.html">article on usethis setup</a> for more details.</p>
<p><code>DESCRIPTION</code> uses a simple file format called DCF, the Debian control format. You can see most of the structure in the examples in this chapter. Each line consists of a <strong>field</strong> name and a value, separated by a colon. When values span multiple lines, they need to be indented:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Description</span><span class="kw">:</span><span class="at"> The description of a package usually spans multiple lines.</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="at">    The second and subsequent lines should be indented, usually with four</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="at">    spaces.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>If you ever need to work with a <code>DESCRIPTION</code> file programmatically, take a look at the <a href="https://desc.r-lib.org/">desc package</a>, which usethis uses heavily under-the-hood.</p>
<p>This chapter shows you how to use the most important <code>DESCRIPTION</code> fields.</p>
</section><section id="sec-description-title-and-description" class="level2" data-number="9.2"><h2 data-number="9.2" class="anchored" data-anchor-id="sec-description-title-and-description">
<span class="header-section-number">9.2</span> <code>Title</code> and <code>Description</code>: What does your package do?</h2>
<p>The <code>Title</code> and <code>Description</code> fields describe what the package does. They differ only in length:</p>
<ul>
<li>
<code>Title</code> is a one line description of the package, and is often shown in a package listing. It should be plain text (no markup), capitalised like a title, and NOT end in a period. Keep it short: listings will often truncate the title to 65 characters.</li>
<li>
<code>Description</code> is more detailed than the title. You can use multiple sentences, but you are limited to one paragraph. If your description spans multiple lines (and it should!), each line must be no more than 80 characters wide. Indent subsequent lines with 4 spaces.</li>
</ul>
<p>The <code>Title</code> and <code>Description</code> for ggplot2 are:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Title</span><span class="kw">:</span><span class="at"> Create Elegant Data Visualisations Using the Grammar of Graphics</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">Description</span><span class="kw">:</span><span class="at"> A system for 'declaratively' creating graphics,</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="at">    based on "The Grammar of Graphics". You provide the data, tell 'ggplot2'</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="at">    how to map variables to aesthetics, what graphical primitives to use,</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="at">    and it takes care of the details.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>A good title and description are important, especially if you plan to release your package to CRAN, because they appear on the package’s CRAN landing page as shown in <a href="#fig-cran-package-page" class="quarto-xref">Figure&nbsp;<span>9.1</span></a>:</p>
<!-- Sara says: be sure there is a blank high res screenshot because prod will add text to the screenshot in the O'Reilly style. That blank screenshot is here as images/cran-package-ggplot2-clean.png. -->
<div class="cell">
<div class="cell-output-display">
<div id="fig-cran-package-page" class="quarto-float quarto-figure quarto-figure-center anchored" alt="A screenshot of the CRAN page for ggplot2, with two labelled boxes indicating the text that comes from the Title and Description fields in the DESCRIPTION file.">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-cran-package-page-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="images/cran-package-ggplot2.png" class="img-fluid figure-img" alt="A screenshot of the CRAN page for ggplot2, with two labelled boxes indicating the text that comes from the Title and Description fields in the DESCRIPTION file.">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-cran-package-page-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;9.1: How Title and Description appear on ggplot2’s CRAN page.
</figcaption></figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Submitting to CRAN
</div>
</div>
<div class="callout-body-container callout-body">
<p>Both the <code>Title</code> and <code>Description</code> are a frequent source of rejections for reasons not covered by the automated <code>R CMD check</code>. In addition to the basics above, here are a few more tips:</p>
<ul>
<li>Put the names of R packages, software, and APIs inside single quotes. This goes for both the <code>Title</code> and the <code>Description</code>. See the ggplot2 example above.</li>
<li>If you need to use an acronym, try to do so in <code>Description</code>, not in <code>Title</code>. In either case, explain the acronym in <code>Description</code>, i.e.&nbsp;fully expand it.</li>
<li>Don’t include the package name, especially in <code>Title</code>, which is often prefixed with the package name.</li>
<li>Do not start with “A package for …” or “This package does …”. This rule makes sense once you look at <a href="https://cran.r-project.org/web/packages/available_packages_by_name.html">the list of CRAN packages by name</a>. The information density of such a listing is much higher without a universal prefix like “A package for …”.</li>
</ul>
<p>If these constraints give you writer’s block, it often helps to spend a few minutes reading <code>Title</code> and <code>Description</code> of packages already on CRAN. Once you read a couple dozen, you can usually find a way to say what you want to say about your package that is also likely to pass CRAN’s human-enforced checks.</p>
</div>
</div>
<p>You’ll notice that <code>Description</code> only gives you a small amount of space to describe what your package does. This is why it’s so important to also include a <code>README.md</code> file that goes into much more depth and shows a few examples. You’ll learn about that in <a href="other-markdown.html#sec-readme" class="quarto-xref"><span>Section 18.1</span></a>.</p>
</section><section id="sec-description-authors-at-r" class="level2" data-number="9.3"><h2 data-number="9.3" class="anchored" data-anchor-id="sec-description-authors-at-r">
<span class="header-section-number">9.3</span> Author: who are you?</h2>
<p>Use the <code>Authors@R</code> field to identify the package’s author, and whom to contact if something goes wrong. This field is unusual because it contains executable R code rather than plain text. Here’s an example:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Authors@R</span><span class="kw">:</span><span class="at"> person("Hadley", "Wickham", email = "hadley@posit.co",</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="at">  role = c("aut", "cre"))</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell">
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/person.html">person</a></span><span class="op">(</span><span class="st">"Hadley"</span>, <span class="st">"Wickham"</span>, email <span class="op">=</span> <span class="st">"hadley@posit.co"</span>, </span>
<span>  role <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"aut"</span>, <span class="st">"cre"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Hadley Wickham &lt;hadley@posit.co&gt; [aut, cre]"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This command says that Hadley Wickham is both the maintainer (<code>cre</code>) and an author (<code>aut</code>) and that his email address is <code>hadley@posit.co</code>. The <code><a href="https://rdrr.io/r/utils/person.html">person()</a></code> function has four main inputs:</p>
<ul>
<li><p>The name, specified by the first two arguments, <code>given</code> and <code>family</code> (these are normally supplied by position, not name). In English cultures, <code>given</code> (first name) comes before <code>family</code> (last name). In many cultures, this convention does not hold. For a non-person entity, such as “R Core Team” or “Posit Software, PBC”, use the <code>given</code> argument (and omit <code>family</code>).</p></li>
<li><p>The <code>email</code> address, which is only an absolute requirement for the maintainer. It’s important to note that this is the address CRAN uses to let you know if your package needs to be fixed in order to stay on CRAN. Make sure to use an email address that’s likely to be around for a while. CRAN policy requires that this be for a person, as opposed to, e.g., a mailing list.</p></li>
<li>
<p>One or more three letter codes specifying the <code>role</code>. These are the most important roles to know about:</p>
<ul>
<li><p><code>cre</code>: the creator or maintainer, the person you should bother if you have problems. Despite being short for “creator”, this is the correct role to use for the current maintainer, even if they are not the initial creator of the package.</p></li>
<li><p><code>aut</code>: authors, those who have made significant contributions to the package.</p></li>
<li><p><code>ctb</code>: contributors, those who have made smaller contributions, like patches.</p></li>
<li><p><code>cph</code>: copyright holder. This is used to list additional copyright holders who are not authors, typically companies, like an employer of one or more of the authors.</p></li>
<li><p><code>fnd</code>: funder, the people or organizations that have provided financial support for the development of the package.</p></li>
</ul>
</li>
<li>
<p>The optional <code>comment</code> argument has become more relevant, since <code><a href="https://rdrr.io/r/utils/person.html">person()</a></code> and CRAN landing pages have gained some nice features around <a href="https://orcid.org">ORCID identifiers</a>. Here’s an example of such usage (note the auto-generated URI):</p>
<div class="cell">
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/person.html">person</a></span><span class="op">(</span></span>
<span>  <span class="st">"Jennifer"</span>, <span class="st">"Bryan"</span>,</span>
<span>  email <span class="op">=</span> <span class="st">"jenny@posit.co"</span>,</span>
<span>  role <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"aut"</span>, <span class="st">"cre"</span><span class="op">)</span>,</span>
<span>  comment <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span>ORCID <span class="op">=</span> <span class="st">"0000-0002-6983-2759"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Jennifer Bryan &lt;jenny@posit.co&gt; [aut, cre] (&lt;https://orcid.org/0000-0002-6983-2759&gt;)"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</li>
</ul>
<p>You can list multiple authors with <code><a href="https://rdrr.io/r/base/c.html">c()</a></code>:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Authors@R</span><span class="kw">:</span><span class="at"> c(</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="at">    person("Hadley", "Wickham", email = "hadley@posit.co", role = "cre"),</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="at">    person("Jennifer", "Bryan", email = "jenny@posit.co", role = "aut"),</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="at">    person("Posit Software, PBC", role = c("cph", "fnd")))</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Every package must have at least one author (<code>aut</code>) and one maintainer (<code>cre</code>) (they might be the same person). The maintainer (<code>cre</code>) must have an email address. These fields are used to generate the basic citation for the package (e.g.&nbsp;<code>citation("pkgname")</code>). Only people listed as authors will be included in the auto-generated citation (<a href="misc.html#sec-misc-inst-citation" class="quarto-xref"><span>Section 8.2.1</span></a>). There are a few extra details if you’re including code that other people have written, which you can learn about in <a href="license.html#sec-code-you-bundle" class="quarto-xref"><span>Section 12.4</span></a>.</p>
<p>An older, still valid approach is to have separate <code>Maintainer</code> and <code>Author</code> fields in <code>DESCRIPTION</code>. However, we strongly recommend the more modern approach of <code>Authors@R</code> and the <code><a href="https://rdrr.io/r/utils/person.html">person()</a></code> function, because it offers richer metadata for various downstream uses.</p>
</section><section id="url-and-bugreports" class="level2" data-number="9.4"><h2 data-number="9.4" class="anchored" data-anchor-id="url-and-bugreports">
<span class="header-section-number">9.4</span> <code>URL</code> and <code>BugReports</code>
</h2>
<p>As well as the maintainer’s email address, it’s a good idea to list other places people can learn more about your package. The <code>URL</code> field is commonly used to advertise the package’s website (<a href="website.html" class="quarto-xref"><span>Chapter 19</span></a>) and to link to a public source repository, where development happens. Multiple URLs are separated with a comma. <code>BugReports</code> is the URL where bug reports should be submitted, e.g., as GitHub issues. For example, devtools has:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">URL</span><span class="kw">:</span><span class="at"> https://devtools.r-lib.org/, https://github.com/r-lib/devtools</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="fu">BugReports</span><span class="kw">:</span><span class="at"> https://github.com/r-lib/devtools/issues</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>If you use <code><a href="https://usethis.r-lib.org/reference/use_github.html">usethis::use_github()</a></code> to connect your local package to a remote GitHub repository, it will automatically populate <code>URL</code> and <code>BugReports</code> for you. If a package is already connected to a remote GitHub repository, <code><a href="https://usethis.r-lib.org/reference/use_github_links.html">usethis::use_github_links()</a></code> can be called to just add the relevant links to <code>DESCRIPTION</code>.</p>
</section><section id="the-license-field" class="level2" data-number="9.5"><h2 data-number="9.5" class="anchored" data-anchor-id="the-license-field">
<span class="header-section-number">9.5</span> The <code>License</code> field</h2>
<p>The <code>License</code> field is mandatory and must specify your package’s license in a standard form recognized by R. The official tooling aims to identify standard open source licenses, so it’s important to appreciate that <code>License</code> is basically a machine-readable field. See <a href="license.html" class="quarto-xref"><span>Chapter 12</span></a> for a full discussion.</p>
</section><section id="sec-description-imports-suggests" class="level2" data-number="9.6"><h2 data-number="9.6" class="anchored" data-anchor-id="sec-description-imports-suggests">
<span class="header-section-number">9.6</span> <code>Imports</code>, <code>Suggests</code>, and friends</h2>
<p>Two of the most important and commonly used <code>DESCRIPTION</code> fields are <code>Imports</code> and <code>Suggests</code>, which list other packages that your package depends on. Packages listed in <code>Imports</code> are needed by your users at runtime and will be installed (or potentially updated) when users install your package via <code><a href="https://rdrr.io/r/utils/install.packages.html">install.packages()</a></code>. The following lines indicate that your package absolutely needs both dplyr and tidyr to work.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Imports</span><span class="kw">:</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="at">    dplyr,</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="at">    tidyr</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Packages listed in <code>Suggests</code> are either needed for development tasks or might unlock optional functionality for your users. The lines below indicate that, while your package can take advantage of ggplot2 and testthat, they’re not absolutely required:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Suggests</span><span class="kw">:</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="at">    ggplot2,</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="at">    testthat</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Both <code>Imports</code> and <code>Suggests</code> take a comma-separated list of package names. We recommend putting one package on each line, and keeping them in alphabetical order. A non-haphazard order makes it easier for humans to parse this field and appreciate changes.</p>
<p>The easiest way to add a package to <code>Imports</code> or <code>Suggests</code> is with <code><a href="https://usethis.r-lib.org/reference/use_package.html">usethis::use_package()</a></code>. If the dependencies are already in alphabetical order, <code>use_package()</code> will keep it that way. In general, it can be nice to run <code><a href="https://usethis.r-lib.org/reference/tidyverse.html">usethis::use_tidy_description()</a></code> regularly, which orders and formats <code>DESCRIPTION</code> fields according to a fixed standard.</p>
<p>If you add packages to <code>DESCRIPTION</code> with <code><a href="https://usethis.r-lib.org/reference/use_package.html">usethis::use_package()</a></code>, it will also remind you of the recommended way to call them (explained more in <a href="dependencies-in-practice.html" class="quarto-xref"><span>Chapter 11</span></a>).</p>
<div class="cell">
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">usethis</span><span class="fu">::</span><span class="fu"><a href="https://usethis.r-lib.org/reference/use_package.html">use_package</a></span><span class="op">(</span><span class="st">"dplyr"</span><span class="op">)</span> <span class="co"># Default is "Imports"</span></span>
<span><span class="co">#&gt; ✔ Adding dplyr to 'Imports' field in DESCRIPTION.</span></span>
<span><span class="co">#&gt; ☐ Refer to functions with `dplyr::fun()`.</span></span>
<span></span>
<span><span class="fu">usethis</span><span class="fu">::</span><span class="fu"><a href="https://usethis.r-lib.org/reference/use_package.html">use_package</a></span><span class="op">(</span><span class="st">"ggplot2"</span>, <span class="st">"Suggests"</span><span class="op">)</span></span>
<span><span class="co">#&gt; ✔ Adding ggplot2 to 'Suggests' field in DESCRIPTION.</span></span>
<span><span class="co">#&gt; ☐ Use `requireNamespace("ggplot2", quietly = TRUE)` to test if</span></span>
<span><span class="co">#&gt;   ggplot2 is installed.</span></span>
<span><span class="co">#&gt; ☐ Then directly refer to functions with `ggplot2::fun()`.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="sec-description-imports-suggests-minium-version" class="level3" data-number="9.6.1"><h3 data-number="9.6.1" class="anchored" data-anchor-id="sec-description-imports-suggests-minium-version">
<span class="header-section-number">9.6.1</span> Minimum versions</h3>
<p>If you need a specific version of a package, specify it in parentheses after the package name:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Imports</span><span class="kw">:</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="at">    dplyr (&gt;= 1.0.0),</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="at">    tidyr (&gt;= 1.1.0)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The <code><a href="https://usethis.r-lib.org/reference/use_package.html">usethis::use_package()</a></code> convenience function also helps you to set a minimum version:</p>
<div class="cell">
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># exact version</span></span>
<span><span class="fu">usethis</span><span class="fu">::</span><span class="fu"><a href="https://usethis.r-lib.org/reference/use_package.html">use_package</a></span><span class="op">(</span><span class="st">"dplyr"</span>, min_version <span class="op">=</span> <span class="st">"1.0.0"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># min version = currently installed version</span></span>
<span><span class="fu">usethis</span><span class="fu">::</span><span class="fu"><a href="https://usethis.r-lib.org/reference/use_package.html">use_package</a></span><span class="op">(</span><span class="st">"dplyr"</span>, min_version <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>You always want to specify a minimum version (<code>dplyr (&gt;= 1.0.0)</code>) rather than an exact version (<code>dplyr (== 1.0.0)</code>). Since R can’t have multiple versions of the same package loaded at the same time, specifying an exact dependency dramatically increases the chance of conflicting versions<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a>.</p>
<p>Versioning is most important if you will release your package for use by others. Usually people don’t have exactly the same versions of packages installed that you do. If someone has an older package that doesn’t have a function your package needs, they’ll get an unhelpful error message if your package does not advertise the minimum version it needs. However, if you state a minimum version, they’ll automatically get an upgrade when they install your package.</p>
<p>Think carefully if you declare a minimum version for a dependency. In some sense, the safest thing to do is to require a version greater than or equal to the package’s current version. For public work, this is most naturally defined as the current CRAN version of a package; private or personal projects may adopt some other convention. But it’s important to appreciate the implications for people who try to install your package: if their local installation doesn’t fulfill all of your requirements around versions, installation will force upgrades of these dependencies. This is desirable if your minimum version requirements are genuine, i.e.&nbsp;your package would be broken otherwise. But if your stated requirements have a less solid rationale, this may be unnecessarily conservative and inconvenient.</p>
<p>In the absence of clear, hard requirements, you should set minimum versions (or not) based on your expected user base, the package versions they are likely to have, and a cost-benefit analysis of being too lax versus too conservative. The <em>de facto</em> policy of the tidyverse team is to specify a minimum version when using a known new feature or when someone encounters a version problem in authentic use. This isn’t perfect, but we don’t currently have the tooling to do better, and it seems to work fairly well in practice.</p>
</section><section id="depends-and-linkingto" class="level3" data-number="9.6.2"><h3 data-number="9.6.2" class="anchored" data-anchor-id="depends-and-linkingto">
<span class="header-section-number">9.6.2</span> <code>Depends</code> and <code>LinkingTo</code>
</h3>
<p>There are three other fields that allow you to express more specialised dependencies:</p>
<ul>
<li>
<p><code>Depends</code>: Prior to the roll-out of namespaces in R 2.14.0 in 2011, <code>Depends</code> was the only way to “depend” on another package. Now, despite the name, you should almost always use <code>Imports</code>, not <code>Depends</code>. You’ll learn why, and when you should still use <code>Depends</code>, in <a href="dependencies-mindset-background.html#sec-dependencies-imports-vs-depends" class="quarto-xref"><span>Section 10.4.1</span></a>.</p>
<p>The most legitimate current use of <code>Depends</code> is to state a minimum version for R itself, e.g. <code>Depends: R (&gt;= 4.0.0)</code>. Again, think carefully if you do this. This raises the same issues as setting a minimum version for a package you depend on, except the stakes are much higher when it comes to R itself. Users can’t simply consent to the necessary upgrade, so, if other packages depend on yours, your minimum version requirement for R can cause a cascade of package installation failures.</p>
<ul>
<li>The <a href="https://cran.r-project.org/package=backports">backports package</a> is useful if you want to use a function like <code><a href="https://rdrr.io/r/tools/userdir.html">tools::R_user_dir()</a></code>, which was introduced in 4.0.0 in 2020, while still supporting older R versions.</li>
<li>The tidyverse packages officially support the current R version, the devel version, and four previous versions.<a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a> We proactively test this support in the standard build matrix we use for continuous integration.</li>
<li>Packages with a lower level of use may not need this level of rigour. The main takeaway is: if you state a minimum of R, you should have a reason and you should take reasonable measures to test your claim regularly.</li>
</ul>
</li>
<li><p><code>LinkingTo</code>: if your package uses C or C++ code from another package, you need to list it here.</p></li>
<li><p><code>Enhances</code>: packages listed here are “enhanced” by your package. Typically, this means you provide methods for classes defined in another package (a sort of reverse <code>Suggests</code>). But it’s hard to define what that means, so we don’t recommend using <code>Enhances</code>.</p></li>
</ul></section><section id="an-r-version-gotcha" class="level3" data-number="9.6.3"><h3 data-number="9.6.3" class="anchored" data-anchor-id="an-r-version-gotcha">
<span class="header-section-number">9.6.3</span> An R version gotcha</h3>
<p>Before we leave this topic, we give a concrete example of how easily an R version dependency can creep in and have a broader impact than you might expect. The <code><a href="https://rdrr.io/r/base/readRDS.html">saveRDS()</a></code> function writes a single R object as an <code>.rds</code> file, an R-specific format. For almost 20 years, <code>.rds</code> files used the “version 2” serialization format. “Version 3” became the new default in R 3.6.0 (released April 2019) and cannot be read by R versions prior to 3.5.0 (released April 2018).</p>
<p>Many R packages have at least one <code>.rds</code> file lurking within and, if that gets re-generated with a modern R version, by default, the new <code>.rds</code> file will have the “version 3” format. When that R package is next built, such as for a CRAN submission, the required R version is automatically bumped to 3.5.0, signaled by this message:</p>
<pre class="console"><code>NB: this package now depends on R (&gt;= 3.5.0)
  WARNING: Added dependency on R &gt;= 3.5.0 because serialized objects in
  serialize/load version 3 cannot be read in older versions of R.
  File(s) containing such objects:
    'path/to/some_file.rds'</code></pre>
<p>Literally, the <code>DESCRIPTION</code> file in the bundled package says <code>Depends: R (&gt;= 3.5.0)</code>, even if <code>DESCRIPTION</code> in the source package says differently<a href="#fn4" class="footnote-ref" id="fnref4" role="doc-noteref"><sup>4</sup></a>.</p>
<p>When such a package is released on CRAN, the new minimum R version is viral, in the sense that all packages listing the original package in <code>Imports</code> or even <code>Suggests</code> have, to varying degrees, inherited the new dependency on R &gt;= 3.5.0.</p>
<p>The immediate take-away is to be very deliberate about the <code>version</code> of <code>.rds</code> files until R versions prior to 3.5.0 have fallen off the edge of what you intend to support. This particular <code>.rds</code> issue won’t be with us forever, but similar issues crop up elsewhere, such as in the standards implicit in compiled C or C++ source code. The broader message is that the more reverse dependencies your package has, the more thought you need to give to your package’s stated minimum versions, especially for R itself.</p>
<!-- TODO: I could probably get the blessing to include a concrete example of this happening, as there are many. For example, the tidymodels team has direct experience. Does that seem necessary / beneficial? -->
</section></section><section id="other-fields" class="level2" data-number="9.7"><h2 data-number="9.7" class="anchored" data-anchor-id="other-fields">
<span class="header-section-number">9.7</span> Other fields</h2>
<p>A few other <code>DESCRIPTION</code> fields are heavily used and worth knowing about:</p>
<ul>
<li><p><code>Version</code> is very important as a way of communicating where your package is in its lifecycle and how it is evolving over time. Learn more in <a href="lifecycle.html" class="quarto-xref"><span>Chapter 21</span></a>.</p></li>
<li><p><code>LazyData</code> is relevant if your package makes data available to the user. If you specify <code>LazyData: true</code>, the datasets are lazy-loaded, which makes them more immediately available, i.e.&nbsp;users don’t have to use <code><a href="https://rdrr.io/r/utils/data.html">data()</a></code>. The addition of <code>LazyData: true</code> is handled automatically by <code><a href="https://usethis.r-lib.org/reference/use_data.html">usethis::use_data()</a></code>. More detail is given in <a href="data.html" class="quarto-xref"><span>Chapter 7</span></a>.</p></li>
<li><p><code>Encoding</code> describes the character encoding of files throughout your package. Our tooling will set this to <code>Encoding: UTF-8</code> as this is the most common encoding in use today, and we are not aware of any reasons to use a different value.</p></li>
<li><p><code>Collate</code> controls the order in which R files are sourced. This only matters if your code has side-effects; most commonly because you’re using S4. If needed, <code>Collate</code> is typically generated by roxygen2 through use of the <code>@include</code> tag. See <code><a href="https://roxygen2.r-lib.org/reference/update_collate.html">?roxygen2::update_collate</a></code> for details.</p></li>
<li><p><code>VignetteBuilder</code> lists any package that your package needs as a vignette engine. Our recommended vignette workflow is described in <a href="vignettes.html#sec-vignettes-workflow-writing" class="quarto-xref"><span>Section 17.1</span></a>, which will list the knitr package in <code>VignetteBuilder</code>.</p></li>
<li>
<p><code>SystemRequirements</code> is where you describe dependencies external to R. This is a plain text field and does not, for example, actually install or check for anything, so you might need to include additional installation details in your README (<a href="other-markdown.html#sec-readme" class="quarto-xref"><span>Section 18.1</span></a>). The most common usage is in the context of a package with compiled code, where <code>SystemRequirements</code> is used to declare the C++ standard, the need for GNU make, or some other external dependency. Examples:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">SystemRequirements</span><span class="kw">:</span><span class="at"> C++17</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="fu">SystemRequirements</span><span class="kw">:</span><span class="at"> GNU make</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="fu">SystemRequirements</span><span class="kw">:</span><span class="at"> TensorFlow (https://www.tensorflow.org/)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</li>
</ul>
<p>We discourage the explicit use of the <code>Date</code> field, as it is extremely easy to forget to update it if you manage <code>Date</code> by hand. This field will be populated in the natural course of bundling the package, e.g.&nbsp;when submitting to CRAN, and we recommend that you just let that happen.</p>
<p>There are many other DESCRIPTION fields that are used less frequently. A complete list can be found in the “The DESCRIPTION file” section of <a href="https://cran.r-project.org/doc/manuals/R-exts.html#The-DESCRIPTION-file">Writing R Extensions</a>.</p>
</section><section id="sec-description-custom-fields" class="level2" data-number="9.8"><h2 data-number="9.8" class="anchored" data-anchor-id="sec-description-custom-fields">
<span class="header-section-number">9.8</span> Custom fields</h2>
<p>There is also some flexibility to create your own fields to add additional metadata. In the narrowest sense, the only restriction is that you shouldn’t re-purpose the official field names used by R. You should also limit yourself to valid English words, so the field names aren’t flagged by the spell-check.</p>
<p>In practice, if you plan to submit to CRAN, we recommend that any custom field name should start with <code>Config/</code>. We’ll revisit this later when we explain how <code>Config/Needs/website</code> is used to record additional packages needed to build a package’s website (<a href="dependencies-in-practice.html#sec-dependencies-nonstandard" class="quarto-xref"><span>Section 11.7</span></a>).</p>
<p>You might notice that <code>create_package()</code> writes two more fields we haven’t discussed yet, relating to the use of the roxygen2 package for documentation:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode yaml code-with-copy"><code class="sourceCode yaml"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">Roxygen</span><span class="kw">:</span><span class="at"> list(markdown = TRUE)</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="fu">RoxygenNote</span><span class="kw">:</span><span class="at"> </span><span class="fl">7.2.1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>You will learn more about these in <a href="man.html" class="quarto-xref"><span>Chapter 16</span></a>. The use of these specific field names is basically an accident of history and, if it were re-done today, they would follow the <code>Config/*</code> pattern recommended above.</p>


</section><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><hr>
<ol>
<li id="fn1"><p>The relationship between “has a <code>DESCRIPTION</code> file” and “is a package” is not quite this clear-cut. Many non-package projects use a <code>DESCRIPTION</code> file to declare their dependencies, i.e.&nbsp;which packages they rely on. In fact, the project for this book does exactly this! This off-label use of <code>DESCRIPTION</code> makes it easy to piggy-back on package development tooling to install all the packages necessary to work with a non-package project.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>The need to specify the exact versions of packages, rather than minimum versions, comes up more often in the development of non-package projects. The <a href="https://rstudio.github.io/renv/">renv package</a> provides a way to do this, by implementing project-specific environments (package libraries). renv is a reboot of an earlier package called packrat. If you want to freeze the dependencies of a project at exact versions, use renv instead of (or possibly in addition to) a <code>DESCRIPTION</code> file.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>See this blog post for more: <a href="https://www.tidyverse.org/blog/2019/04/r-version-support/" class="uri">https://www.tidyverse.org/blog/2019/04/r-version-support/</a>.<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn4"><p>The different package states, such as source vs.&nbsp;bundled, are explained in <a href="structure.html#sec-package-states" class="quarto-xref"><span>Section 3.1</span></a>.<a href="#fnref4" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol></section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/r-pkgs\.org\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="./misc.html" class="pagination-link" aria-label="Other components">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Other components</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./dependencies-mindset-background.html" class="pagination-link" aria-label="Dependencies: Mindset and Background">
        <span class="nav-page-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Dependencies: Mindset and Background</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->



<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/hadley/r-pkgs/edit/main/description.Rmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/hadley/r-pkgs/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li></ul></div></div></div></footer></body></html>